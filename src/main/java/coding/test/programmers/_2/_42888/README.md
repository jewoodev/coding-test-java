## [오픈채팅방](https://school.programmers.co.kr/learn/courses/30/lessons/42888)

문제를 해결하기 위한 핵심 접근 방식은 "상태 관리"이다.

1. **문제의 핵심 파악**
   - 채팅방의 모든 기록을 순서대로 보여줘야 함
   - 사용자가 닉네임을 변경하면 과거 기록도 모두 새로운 닉네임으로 보여줘야 함
   - 즉, "시간 순서"와 "최신 상태"를 모두 관리해야 함
2. **해결 전략**
   - 시간 순서는 List로 관리 (기록의 순서 보장)
   - 최신 상태는 Map으로 관리 (ID와 닉네임의 최신 매핑)
   - 이렇게 두 가지 관점을 분리해서 생각함
3. **데이터 흐름**
   - 입력 데이터를 받아서
   - 먼저 상태(Map)를 업데이트하고
   - 기록(List)을 저장한 다음
   - 최종적으로 기록을 순회하면서 최신 상태를 반영한 메시지 생성

이런 접근 방식은 "상태와 기록을 분리해서 관리한다"는 것이 핵심이다. 이는 실제 채팅 시스템에서도 자주 사용되는 패턴이다.

## 주요 로직 설명

1. **기록 처리 단계**
   - 각 record를 공백으로 분리하여 처리합니다.
   - 명령어("Enter", "Leave", "Change")에 따라 다르게 처리합니다:
     - "Enter": 기록을 저장하고 닉네임을 업데이트
     - "Leave": 기록만 저장
     - "Change": 닉네임만 업데이트
2. **최종 메시지 생성 단계**
   - 저장된 기록을 순서대로 순회하면서
   - Map에서 해당 사용자의 최신 닉네임을 가져와서
   - "들어왔습니다" 또는 "나갔습니다" 메시지를 생성합니다

이 풀이의 핵심 포인트는:
   - 사용자가 닉네임을 변경할 때마다 Map을 업데이트하여 항상 최신 닉네임을 유지
   - 실제 기록은 List에 순서대로 저장하여 나중에 순서대로 메시지 생성
   - StringBuilder를 사용하여 문자열 연산을 효율적으로 처리

이렇게 하면 사용자가 닉네임을 변경하더라도, 과거 기록에서도 최신 닉네임으로 표시되는 요구사항을 만족할 수 있다.